{% extends 'base.html' %}

{% block content %}
<div class="container-fluid">
    <!-- Cabeçalho -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="mb-0">
            <i class="bi bi-database"></i> Cadastros
        </h2>
    </div>

    <!-- Cards de Estatísticas -->
    <div class="row g-4 mb-4">
        <div class="col-md-6 col-lg-3">
            <div class="card">
                <div class="card-body">
                    <h6 class="card-subtitle mb-2 text-muted">
                        <i class="bi bi-box-seam"></i> Total de Materiais
                    </h6>
                    <h2 class="card-title mb-0">{{ estatisticas.total_materiais|default(0) }}</h2>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-lg-3">
            <div class="card">
                <div class="card-body">
                    <h6 class="card-subtitle mb-2 text-muted">
                        <i class="bi bi-building"></i> Centros de Custo
                    </h6>
                    <h2 class="card-title mb-0">{{ estatisticas.total_centros_custo|default(0) }}</h2>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-lg-3">
            <div class="card">
                <div class="card-body">
                    <h6 class="card-subtitle mb-2 text-muted">
                        <i class="bi bi-check-circle"></i> Materiais Ativos
                    </h6>
                    <h2 class="card-title mb-0">{{ estatisticas.materiais_ativos|default(0) }}</h2>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-lg-3">
            <div class="card">
                <div class="card-body">
                    <h6 class="card-subtitle mb-2 text-muted">
                        <i class="bi bi-building-check"></i> Centros Ativos
                    </h6>
                    <h2 class="card-title mb-0">{{ estatisticas.centros_ativos|default(0) }}</h2>
                </div>
            </div>
        </div>
    </div>

    <!-- Seções de Acesso Rápido -->
    <div class="row g-4">
        <!-- Materiais -->
        <div class="col-md-6">
            <div class="card h-100">
                <div class="card-header">
                    <div class="d-flex justify-content-between align-items-center">
                        <h5 class="card-title mb-0">
                            <i class="bi bi-box-seam"></i> Materiais
                        </h5>
                        <a href="{{ url_for('cadastros.materiais') }}" class="btn btn-primary btn-sm">
                            <i class="bi bi-arrow-right"></i> Acessar
                        </a>
                    </div>
                </div>
                <div class="card-body">
                    <div class="list-group list-group-flush">
                        {% for material in ultimos_materiais %}
                        <div class="list-group-item">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <h6 class="mb-1">{{ material.nome }}</h6>
                                    <small class="text-muted">Código: {{ material.codigo }}</small>
                                </div>
                                <span class="badge {% if material.ativo %}bg-success{% else %}bg-danger{% endif %}">
                                    {{ 'Ativo' if material.ativo else 'Inativo' }}
                                </span>
                            </div>
                        </div>
                        {% else %}
                        <div class="text-center py-4">
                            <i class="bi bi-box display-4 text-muted"></i>
                            <p class="mt-2 text-muted">Nenhum material cadastrado</p>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>

        <!-- Centros de Custo -->
        <div class="col-md-6">
            <div class="card h-100">
                <div class="card-header">
                    <div class="d-flex justify-content-between align-items-center">
                        <h5 class="card-title mb-0">
                            <i class="bi bi-building"></i> Centros de Custo
                        </h5>
                        <a href="{{ url_for('cadastros.centros_custo') }}" class="btn btn-primary btn-sm">
                            <i class="bi bi-arrow-right"></i> Acessar
                        </a>
                    </div>
                </div>
                <div class="card-body">
                    <div class="list-group list-group-flush">
                        {% for centro in ultimos_centros %}
                        <div class="list-group-item">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <h6 class="mb-1">{{ centro.nome }}</h6>
                                    <small class="text-muted">Código: {{ centro.codigo }}</small>
                                </div>
                                <span class="badge {% if centro.ativo %}bg-success{% else %}bg-danger{% endif %}">
                                    {{ 'Ativo' if centro.ativo else 'Inativo' }}
                                </span>
                            </div>
                        </div>
                        {% else %}
                        <div class="text-center py-4">
                            <i class="bi bi-building display-4 text-muted"></i>
                            <p class="mt-2 text-muted">Nenhum centro de custo cadastrado</p>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %} 